<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>tuto-decma-converging</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="imt.css" />
</head>
<body>
<h1 id="converging">Converging</h1>
<p>The idea is to highlight the capability an AI has to increase it behavior. One way to do that is to plot it score in game while the AI increase its ability to play. Ideally, we can observe an increasing asymptotic curve toward it maximal theoretical limit. In that case we can assume that the AI converged.</p>
<h2 id="prerequisite">Prerequisite</h2>
<p>This tutorial suppose that you already performed the <strong>Initiation Autonomous Systems - tutorials</strong> and specially the <strong>Reinforcement Learning</strong> tutorial. However, every applied learning method.</p>
<p>We will start from the <code>launcherPy421.py</code> to visualize the behavior of <code>myPy421RLearner.py</code>.</p>
<p>Actually, the <code>launcherPy421.py</code> run a certain number of games with a <code>myPy421RLearner.py</code> <code>Player</code>. The script lookalike:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="co">#!env python3</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="im">from</span> hackagames.gamePy421.gameEngine <span class="im">import</span> GameSolo <span class="im">as</span> Game</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a><span class="im">from</span> tutos.myPy421RLearner <span class="im">import</span> AutonomousPlayer <span class="im">as</span> Player</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a><span class="co"># Instanciate and start 100 games</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>game<span class="op">=</span> Game()</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>player<span class="op">=</span> Player()</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>results<span class="op">=</span> game.testPlayer( player, <span class="dv">1000</span> )</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a><span class="co"># Annalisis</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a>average<span class="op">=</span> <span class="bu">sum</span>(results)<span class="op">/</span><span class="bu">len</span>(results)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a><span class="bu">print</span>( <span class="ss">f&quot;Average score: </span><span class="sc">{</span>average<span class="sc">}</span><span class="ss">&quot;</span> )</span></code></pre></div>
<h2 id="plotting-with-pyplot">Plotting with PyPlot</h2>
<p><em>Matplotlib</em> is a plotting library for the Python programming language and its numerical mathematics extension NumPy. It provides an object-oriented API for embedding plots into applications using general-purpose GUI toolkits. In this library, <em>PyPlot</em> is certainly the most used component (it is the visible part of the iceberg). It proposes friendly primitive to easily plot data.</p>
<p>More on <a href="https://www.w3schools.com/python/matplotlib_pyplot.asp">W3Schools</a>.</p>
<p>First we have to include the resource <code>import matplotlib.pyplot as plt</code> on our launcher. Then we can plot the resulting scores using <code>plot()</code> and <code>show()</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>plt.plot( results )</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>plt.ylabel( <span class="st">&quot;scores&quot;</span> )</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>plt.show()</span></code></pre></div>
<p>Then launch your experiment:.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="ex">python3</span> ./launcherPy421.py</span></code></pre></div>
<h2 id="moving-average">Moving Average</h2>
<p>Du to very hazardous games. Results on <strong>Py421</strong> is difficult to interpret. The goal is to highlight a tendency. For that, it is required to compute a moving average, before to print the curve. Something like:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="co"># Filtering</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>step<span class="op">=</span> <span class="dv">200</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>movingAverage<span class="op">=</span> []</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>i<span class="op">=</span> step</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>stop<span class="op">=</span> <span class="bu">len</span>(results)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a><span class="cf">while</span> i <span class="op">&lt;</span> stop :</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>    movingAverage.append( <span class="bu">sum</span>(results[i<span class="op">-</span>step:i])<span class="op">/</span>step )</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a>    i<span class="op">+=</span> <span class="dv">1</span></span></code></pre></div>
<p>Furthermore, to speed up the experiment it is preferable to remove any <code>print</code> in the Autonomous player. Finally, do not forget to remove any loaded precomputed statistics to observe the learning results from scratch.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="fu">rm</span> data-statReward.json</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="ex">python3</span> ./launcherPy421.py</span></code></pre></div>
<h2 id="some-result">Some result</h2>
<p>Some results to compare with:</p>
<figure>
<img src="figs/converging-rlearner.svg" alt="" /><figcaption>Fig</figcaption>
</figure>
Py421 - RLearner - Incresing average for <code>1000</code> games then <code>10000</code> (Rolling Average Step: <code>200</code>, learning rate <code>0.1</code>)
</caption>
<p><br /></p>
<figure>
<img src="figs/converging-qlearner.svg" alt="" /><figcaption>Fig</figcaption>
</figure>
Py421 - QLearner - Incresing average for <code>1000</code> games then <code>10000</code> (Rolling Average Step: <code>200</code>, learning rate <code>0.1</code>)
</caption>
<p><br /></p>
<figure>
<img src="figs/converging-risky.svg" alt="" /><figcaption>Fig</figcaption>
</figure>
Risky - QLearner - Incresing average for <code>20000</code> games (Rolling Average Step: <code>200</code>, learning rate <code>0.1</code>) for a Basic and a Heuristic Reward Function
</caption>
</body>
</html>
